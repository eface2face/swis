<script src="swis.js"></script>
<script>

	
	var source;

	
	var transport = {
		onload : null,
		onmessage : null,
		send : function(data) {
			source.postMessage(data, "*");
		}
	};

	var reflector = new swis.Reflector(transport);
	
	
	window.addEventListener("message", function(message){
		reflector.reflect(document);
		//Get source
		source = message.source;
		//Init transport
		transport.onload(message.data);

		//Listen again fro new messages
		window.addEventListener("message", function(message){
			//Init transport
			transport.onmessage(message.data);
		});
	});
</script>